module.exports=function(a,b){"use strict";function c(){for(var a=arguments,b=this.length=a.length,c=0;b>c;++c)this[c]=a[c]}function d(d,e,f){b.length||a(function(){for(var a=0;a<b.length;a+=3){var d=b[a],e=b[a+1],f=b[a+2],g=d[e?2:3];if("function"!=typeof g)d[e?0:1].apply(void 0,f);else try{var h=g.apply(void 0,f);h instanceof c?d[0].apply(void 0,h):d[0](h)}catch(i){d[1](i)}}b=[]}),b.push(d,e,f)}function e(a,b,c){if(a&&("object"==typeof a||"function"==typeof a)){try{var d=a.then}catch(e){return c(e),1}if("function"==typeof d){var f=0;try{d.call(a,function(){f++||b.apply(void 0,arguments)},function(){f++||c.apply(void 0,arguments)})}catch(e){f++||c(e)}return 1}}}function f(a,b){return function(c,e){return new g(function(f,g){d([f,g,c,e],a,b)})}}function g(a){var b=this,c=[],h=function(a,e){for(var g=0;g<c.length;++g)d(c[g],e,a);b.then=f(e,a),c=0},i=function(a){h(arguments,0)},j=function(a){if(a===b)throw TypeError();e(a,j,i)||h(arguments,1)};if(this.then=function(a,b){return new g(function(d,e){c.push([d,e,a,b])})},"function"==typeof a)try{a(j,i)}catch(k){i(k)}}return g.all=function(a){return new g(function(b,c){function d(d){e(a[d],function(a){g[d]=a,--f&&b(g)},c)?++f:g[d]=a[d]}var f=0,g=[];if("object"!=typeof a||!1 in a)c(TypeError("not array"));else{for(var h=0,i=a.length;i>h;++h)d(h);i&&f||b(g)}})},g.race=function(a){return new g(function(b,c){if("object"!=typeof a||!1 in a)c(TypeError("not array"));else{for(var d=0,f=a.length;f>d;++d)if(!e(a[d],b,c)){b(a[d]);break}f||b(void 0)}})},g.resolve=function(){return{then:f(1,arguments)}},g.reject=function(){return{then:f(0,arguments)}},g.Arguments=c,g}(process.nextTick,[]);
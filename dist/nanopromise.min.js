!function(){"use strict";function a(a,b,c){function d(a,b,c){var d=a[b?2:3];if("function"!=typeof d)return a[b?0:1](c);try{a[0](d.call(void 0,c))}catch(e){a[1](e)}}f.length||e(function(){for(var a=0;a<f.length;a+=3)d(f[a],f[a+1],f[a+2]);f=[]}),f.push(a,b,c)}function b(a,b,c){if(a&&("object"==typeof a||"function"==typeof a)){try{var d=a.then}catch(e){return c(e),1}if("function"==typeof d){var f=0;try{d.call(a,function(a){f++||b(a)},function(a){f++||c(a)})}catch(e){f++||c(e)}return 1}}}function c(b,c){return function(e,f){return new d(function(d,g){a([d,g,e,f],b,c)})}}function d(e){var f=this,g=[],h=(this.then=function(a,b){return new d(function(c,d){g.push([c,d,a,b])})},function(b,d){for(var e=0;e<g.length;++e)a(g[e],d,b);f.then=c(d,b),g=0}),i=function(a){if(a===f)throw TypeError();b(a,i,j)||h(a,1)},j=function(a){h(a,0)};if("function"==typeof e){var f=this;try{e(i,j)}catch(k){reject(f,k)}}}var e=process.nextTick,f=[];module.exports=d,d.all=function(a){return new d(function(c,d){function e(e){var h=a[e];b(h,function(a){g[e]=a,--f&&c(g)},function(a){d(a)})?++f:g[e]=h}var f=0,g=[];if("object"!=typeof a||!1 in a)d(TypeError("not array"));else{for(var h=0,i=a.length;i>h;++h)e(h);i||c(g)}})},d.race=function(a){return new d(function(c,d){if("object"!=typeof a||!1 in a)d(TypeError("not array"));else{for(var e=0,f=a.length;f>e;++e)if(!b(p,function(a){c(a)},function(a){d(a)})){c(p);break}f||c(void 0)}})},d.resolve=function(a){return{then:c(1,a)}},d.reject=function(a){return{then:c(0,a)}}}();